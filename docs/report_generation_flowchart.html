<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë³´ê³ ì„œ ìƒì„± ë¡œì§ í”Œë¡œìš°ì°¨íŠ¸ - v2.7 (GIS + ML í†µí•©)</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 40px;
            font-size: 2.5em;
        }
        .diagram-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid #e9ecef;
        }
        .info-box {
            background: #e3f2fd;
            border-left: 5px solid #2196f3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .code-block {
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        tr:hover {
            background: #f8f9fa;
        }
        .highlight {
            background: #fff3cd;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“ ë³´ê³ ì„œ ìƒì„± ë¡œì§ í”Œë¡œìš°ì°¨íŠ¸</h1>
        
        <div class="info-box">
            <h3>ì‹œìŠ¤í…œ ì •ë³´</h3>
            <p><strong>ë²„ì „:</strong> v2.7 Production Ready</p>
            <p><strong>íŒŒì¼:</strong> scripts/weather_job.py, weather_job_3d.py</p>
            <p><strong>í•¨ìˆ˜:</strong> generate_summary_report(), render_html_3d(), write_side_outputs()</p>
            <p><strong>ì¶œë ¥:</strong> 4ê°€ì§€ í˜•ì‹ (JSON, CSV, TXT, HTML) + GIS Maps + ML Forecasts</p>
        </div>
        
        <div class="info-box" style="background: #e1f5fe; border-left-color: #2196f3;">
            <h3>â­ v2.7 ì‹ ê·œ ì¶œë ¥</h3>
            <p><strong>GIS:</strong> map_leaflet.html (Leaflet ì§€ë„), wind_uv.geojson (108 vectors), screenshots</p>
            <p><strong>ML:</strong> summary_3d_*_ml.csv (7-day predictions), anomaly alerts (z-score)</p>
            <p><strong>í†µí•©:</strong> run_integrated_viz.py (ë°ì´í„° ìˆ˜ì§‘ + GIS + ML í•œ ë²ˆì—)</p>
        </div>

        <!-- ì „ì²´ íŒŒì´í”„ë¼ì¸ -->
        <h2>ğŸ”„ ì „ì²´ ë³´ê³ ì„œ ìƒì„± íŒŒì´í”„ë¼ì¸</h2>
        <div class="diagram-container">
            <div class="mermaid">
graph TD
    A[ì‹œì‘: weather_job.py] --> B[1. ë°ì´í„° ìˆ˜ì§‘<br/>collect_weather_data]
    
    B --> C{ì‹¤í–‰ ëª¨ë“œ<br/>ê²°ì •}
    C -->|ì˜¤í”„ë¼ì¸| D[í•©ì„± ë°ì´í„° ìƒì„±<br/>24 points]
    C -->|ì˜¨ë¼ì¸| E[ì‹¤ì œ API í˜¸ì¶œ<br/>121 points]
    
    D --> F[2. ë°ì´í„° ë¶„ì„<br/>analyze_weather_data]
    E --> F
    
    F --> G[ERI ê³„ì‚°<br/>ERICalculator]
    G --> H[ì˜ˆë³´ ìœµí•©<br/>ForecastFusion]
    H --> I[ìš´í•­ íŒì •<br/>OperationalDecisionMaker]
    
    I --> J[3. ë³´ê³ ì„œ ìƒì„±<br/>generate_summary_report]
    
    J --> K1[JSON ë³´ê³ ì„œ<br/>summary_YYYYMMDD_HHMM.json]
    J --> K2[CSV ë³´ê³ ì„œ<br/>api_status_YYYYMMDD_HHMM.csv]
    J --> K3[TXT ë³´ê³ ì„œ<br/>summary.txt]
    J --> K4[HTML ë³´ê³ ì„œ<br/>summary.html]
    
    I --> L[4. ìš´í•­ ê°€ëŠ¥ì„± ì˜ˆì¸¡<br/>create_operability_report]
    L --> M1[operability_forecasts.csv]
    L --> M2[eta_predictions.csv]
    
    K3 --> N[Telegram ì•Œë¦¼]
    K4 --> O[Email ì•Œë¦¼]
    
    style K1 fill:#e3f2fd
    style K2 fill:#e8f5e9
    style K3 fill:#fff3e0
    style K4 fill:#fce4ec
    style N fill:#e1bee7
    style O fill:#f3e5f5
            </div>
        </div>

        <!-- generate_summary_report ìƒì„¸ í”Œë¡œìš° -->
        <h2>ğŸ“ generate_summary_report í•¨ìˆ˜ ìƒì„¸</h2>
        <div class="diagram-container">
            <div class="mermaid">
graph TD
    A[ì…ë ¥: data, analysis, output_dir] --> B[ë””ë ‰í† ë¦¬ ìƒì„±<br/>output_path.mkdir]
    B --> C[íƒ€ì„ìŠ¤íƒ¬í”„ ìƒì„±<br/>YYYYMMDD_HHMM]
    
    C --> D[ë©”íƒ€ë°ì´í„° êµ¬ì„±]
    D --> D1[execution_mode]
    D --> D2[collection_rate]
    D --> D3[resilience_notes]
    
    D3 --> E[JSON ë³´ê³ ì„œ ìƒì„±]
    E --> E1[metadata ì„¹ì…˜]
    E --> E2[api_status ì„¹ì…˜]
    E --> E3[analysis ì„¹ì…˜]
    E --> E4[collection_stats ì„¹ì…˜]
    E --> E5[íŒŒì¼ ì €ì¥<br/>json.dump]
    
    E5 --> F[CSV ë³´ê³ ì„œ ìƒì„±]
    F --> F1[csv_data ë¦¬ìŠ¤íŠ¸ êµ¬ì„±]
    F --> F2[DataFrame ë³€í™˜]
    F --> F3[íŒŒì¼ ì €ì¥<br/>df.to_csv]
    
    F3 --> G[TXT ë³´ê³ ì„œ ìƒì„±]
    G --> G1[í—¤ë” ì„¹ì…˜]
    G --> G2[ë°ì´í„° ìˆ˜ì§‘ í˜„í™©]
    G --> G3[ë¶„ì„ ê²°ê³¼]
    G --> G4[ìš´í•­ íŒì •]
    G --> G5[Resilience ë©”ëª¨]
    G --> G6[íŒŒì¼ ì €ì¥<br/>summary.txt]
    
    G6 --> H[HTML ë³´ê³ ì„œ ìƒì„±]
    H --> H1[DOCTYPE + ìŠ¤íƒ€ì¼]
    H --> H2[í—¤ë” ì„¹ì…˜<br/>ë©”íƒ€ë°ì´í„°]
    H --> H3[í…Œì´ë¸” ì„¹ì…˜<br/>ë°ì´í„° ìˆ˜ì§‘ í˜„í™©]
    H --> H4[ë¦¬ìŠ¤íŠ¸ ì„¹ì…˜<br/>ë¶„ì„ ê²°ê³¼]
    H --> H5[íŒì • ì„¹ì…˜<br/>GO/COND/NO-GO]
    H --> H6[Resilience ë©”ëª¨]
    H --> H7[íŒŒì¼ ì €ì¥<br/>summary.html]
    
    H7 --> I[ë°˜í™˜: íŒŒì¼ ê²½ë¡œ ë”•ì…”ë„ˆë¦¬]
    
    style E5 fill:#e3f2fd
    style F3 fill:#e8f5e9
    style G6 fill:#fff3e0
    style H7 fill:#fce4ec
    style I fill:#c5cae9
            </div>
        </div>

        <!-- ë°ì´í„° ì²˜ë¦¬ ìƒì„¸ -->
        <h2>âš™ï¸ ë°ì´í„° ì²˜ë¦¬ ë¡œì§ ìƒì„¸</h2>
        
        <table>
            <thead>
                <tr>
                    <th>ë‹¨ê³„</th>
                    <th>í•¨ìˆ˜/ëª¨ë“ˆ</th>
                    <th>ì…ë ¥</th>
                    <th>ì¶œë ¥</th>
                    <th>ì²˜ë¦¬ ì‹œê°„</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>1. ëª¨ë“œ ê²°ì •</strong></td>
                    <td>decide_execution_mode()</td>
                    <td>mode, missing_secrets, ncm_available</td>
                    <td>resolved_mode, offline_reasons</td>
                    <td>&lt;0.01ì´ˆ</td>
                </tr>
                <tr>
                    <td><strong>2. ë°ì´í„° ìˆ˜ì§‘</strong></td>
                    <td>API Connectors</td>
                    <td>location, forecast_hours</td>
                    <td>121 data points (ì˜¨ë¼ì¸)</td>
                    <td>&lt;30ì´ˆ</td>
                </tr>
                <tr>
                    <td><strong>3. ERI ê³„ì‚°</strong></td>
                    <td>ERICalculator.compute_eri_timeseries()</td>
                    <td>MarineTimeseries</td>
                    <td>121 ERIPoints</td>
                    <td>&lt;0.05ì´ˆ</td>
                </tr>
                <tr>
                    <td><strong>4. ì˜ˆë³´ ìœµí•©</strong></td>
                    <td>ForecastFusion.fuse_forecast_sources()</td>
                    <td>all_timeseries, location</td>
                    <td>121 fused forecasts</td>
                    <td>&lt;0.1ì´ˆ</td>
                </tr>
                <tr>
                    <td><strong>5. ìš´í•­ íŒì •</strong></td>
                    <td>OperationalDecisionMaker.decide_and_eta()</td>
                    <td>forecasts, eri_points</td>
                    <td>121 decisions</td>
                    <td>&lt;0.02ì´ˆ</td>
                </tr>
                <tr>
                    <td><strong>6. í†µê³„ ê³„ì‚°</strong></td>
                    <td>Python sum(), avg()</td>
                    <td>eri_points, decisions</td>
                    <td>averages, counts</td>
                    <td>&lt;0.01ì´ˆ</td>
                </tr>
                <tr style="background: #fff3e0;">
                    <td><strong>7. ë³´ê³ ì„œ ìƒì„±</strong></td>
                    <td>generate_summary_report()</td>
                    <td>data, analysis</td>
                    <td>JSON/CSV/TXT/HTML</td>
                    <td><span class="highlight">&lt;0.5ì´ˆ</span></td>
                </tr>
                <tr>
                    <td><strong>8. ìš´í•­ ì˜ˆì¸¡</strong></td>
                    <td>create_operability_report()</td>
                    <td>weather_timeseries, routes</td>
                    <td>operability CSV files</td>
                    <td>&lt;0.2ì´ˆ</td>
                </tr>
            </tbody>
        </table>

        <!-- ë³´ê³ ì„œ í˜•ì‹ë³„ íŠ¹ì§• -->
        <h2>ğŸ“„ ë³´ê³ ì„œ í˜•ì‹ë³„ íŠ¹ì§•</h2>
        
        <div class="info-box" style="background: #e3f2fd; border-left-color: #2196f3;">
            <h3>ğŸ“Š JSON ë³´ê³ ì„œ (summary_YYYYMMDD_HHMM.json)</h3>
            <p><strong>ìš©ë„:</strong> API í†µí•©, ë°ì´í„° ë¶„ì„, ìë™í™” ì²˜ë¦¬</p>
            <p><strong>êµ¬ì¡°:</strong> ê³„ì¸µì  JSON (metadata, api_status, analysis, collection_stats)</p>
            <p><strong>í¬ê¸°:</strong> 2-3 KB</p>
            <p><strong>ì¸ì½”ë”©:</strong> UTF-8, ensure_ascii=False</p>
            <p><strong>íŠ¹ì§•:</strong> ì „ì²´ ë°ì´í„° + ë©”íƒ€ë°ì´í„° í¬í•¨, Python dictì™€ 1:1 ë§¤í•‘</p>
        </div>

        <div class="info-box" style="background: #e8f5e9; border-left-color: #4caf50;">
            <h3>ğŸ“Š CSV ë³´ê³ ì„œ (api_status_YYYYMMDD_HHMM.csv)</h3>
            <p><strong>ìš©ë„:</strong> Excel ë¶„ì„, ë°ì´í„° ê³¼í•™, ì‹œê³„ì—´ ì¶”ì </p>
            <p><strong>êµ¬ì¡°:</strong> í…Œì´ë¸” (API, Status, Confidence, Timestamp)</p>
            <p><strong>í¬ê¸°:</strong> &lt;1 KB</p>
            <p><strong>íŠ¹ì§•:</strong> pandas DataFrame ê¸°ë°˜, API ìƒíƒœ ì¶”ì ì— ìµœì í™”</p>
        </div>

        <div class="info-box" style="background: #fff3e0; border-left-color: #ff9800;">
            <h3>ğŸ“± TXT ë³´ê³ ì„œ (summary.txt)</h3>
            <p><strong>ìš©ë„:</strong> Telegram ë©”ì‹œì§€, í…ìŠ¤íŠ¸ ê¸°ë°˜ ì•Œë¦¼</p>
            <p><strong>êµ¬ì¡°:</strong> í”Œë ˆì¸ í…ìŠ¤íŠ¸, ì´ëª¨ì§€ í¬í•¨</p>
            <p><strong>í¬ê¸°:</strong> ~1 KB</p>
            <p><strong>ì œí•œ:</strong> Telegram 4096ì ì œí•œ (ì´ˆê³¼ ì‹œ Document ì „ì†¡)</p>
            <p><strong>íŠ¹ì§•:</strong> ê°„ê²°í•œ ìš”ì•½, ëª¨ë°”ì¼ ì¹œí™”ì </p>
        </div>

        <div class="info-box" style="background: #fce4ec; border-left-color: #e91e63;">
            <h3>ğŸ“§ HTML ë³´ê³ ì„œ (summary.html) â­ v2.3 ì‹ ê·œ</h3>
            <p><strong>ìš©ë„:</strong> Email ì•Œë¦¼, ì›¹ ë¸Œë¼ìš°ì € ë·°</p>
            <p><strong>êµ¬ì¡°:</strong> Styled HTML (CSS ë‚´ì¥)</p>
            <p><strong>í¬ê¸°:</strong> 2-3 KB</p>
            <p><strong>íŠ¹ì§•:</strong> ìƒ‰ìƒ ì½”ë”©, í…Œì´ë¸” í¬ë§·, Gmail ìµœì í™”, ì‹œê°ì  ë³´ê³ ì„œ</p>
        </div>

        <!-- íŒŒì´í”„ë¼ì¸ í”Œë¡œìš° -->
        <h2>ğŸ”„ ë°ì´í„° ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸</h2>
        <div class="diagram-container">
            <div class="mermaid">
sequenceDiagram
    participant Main as weather_job.py
    participant Collect as collect_weather_data()
    participant APIs as API Connectors
    participant Analyze as analyze_weather_data()
    participant ERI as ERICalculator
    participant Fusion as ForecastFusion
    participant Decision as OperationalDecisionMaker
    participant Report as generate_summary_report()
    participant Files as ì¶œë ¥ íŒŒì¼

    Main->>Collect: --location AGI --hours 24 --mode auto
    Collect->>APIs: Stormglass API í˜¸ì¶œ
    APIs-->>Collect: 48 data points (85% ì‹ ë¢°ë„)
    Collect->>APIs: Open-Meteo API í˜¸ì¶œ
    APIs-->>Collect: 25 data points (75% ì‹ ë¢°ë„)
    Collect->>APIs: NCM Selenium ìŠ¤í¬ë˜í•‘
    APIs-->>Collect: 24 data points (70% ì‹ ë¢°ë„)
    Collect->>APIs: WorldTides API í˜¸ì¶œ
    APIs-->>Collect: 24 data points (30% í´ë°±)
    
    Collect-->>Main: 121 total points, api_status
    
    Main->>Analyze: data (121 points)
    Analyze->>ERI: compute_eri_timeseries()
    ERI-->>Analyze: 121 ERI points
    Analyze->>Fusion: fuse_forecast_sources()
    Fusion-->>Analyze: 121 fused forecasts
    Analyze->>Decision: decide_and_eta()
    Decision-->>Analyze: 121 decisions (GO/COND/NO-GO)
    
    Analyze-->>Main: analysis (í†µê³„, í‰ê· , íŒì •)
    
    Main->>Report: data, analysis, "out"
    Report->>Files: summary_YYYYMMDD_HHMM.json
    Report->>Files: api_status_YYYYMMDD_HHMM.csv
    Report->>Files: summary.txt
    Report->>Files: summary.html
    
    Report-->>Main: íŒŒì¼ ê²½ë¡œ ë°˜í™˜
    
    Main->>Main: ìš´í•­ ê°€ëŠ¥ì„± ì˜ˆì¸¡
    Main->>Files: operability_forecasts.csv
    Main->>Files: eta_predictions.csv
            </div>
        </div>

        <!-- ë³´ê³ ì„œ ìƒì„± ìƒì„¸ í”Œë¡œìš° -->
        <h2>ğŸ“ generate_summary_report() ìƒì„¸ í”Œë¡œìš°</h2>
        <div class="diagram-container">
            <div class="mermaid">
flowchart TD
    START([ì‹œì‘: generate_summary_report]) --> PREP[ë””ë ‰í† ë¦¬ ìƒì„± & íƒ€ì„ìŠ¤íƒ¬í”„]
    
    PREP --> META[ë©”íƒ€ë°ì´í„° ê³„ì‚°]
    META --> META1[execution_mode ì¶”ì¶œ]
    META --> META2[success_sources ê³„ì‚°]
    META --> META3[collection_rate ê³„ì‚°]
    META --> META4[resilience_notes ì¶”ì¶œ]
    
    META4 --> JSON[JSON ë³´ê³ ì„œ ìƒì„±]
    JSON --> JSON1[metadata ê°ì²´ ìƒì„±]
    JSON1 --> JSON2[api_status ì¶”ê°€]
    JSON2 --> JSON3[analysis ì¶”ê°€]
    JSON3 --> JSON4[collection_stats ì¶”ê°€]
    JSON4 --> JSON5[offline_reasons ì¶”ê°€<br/>í•´ë‹¹ ì‹œë§Œ]
    JSON5 --> JSON6[json.dump<br/>summary_YYYYMMDD_HHMM.json]
    
    JSON6 --> CSV[CSV ë³´ê³ ì„œ ìƒì„±]
    CSV --> CSV1[csv_data ë¦¬ìŠ¤íŠ¸ êµ¬ì„±<br/>APIë³„ ë£¨í”„]
    CSV1 --> CSV2[DataFrame ë³€í™˜]
    CSV2 --> CSV3[df.to_csv<br/>api_status_YYYYMMDD_HHMM.csv]
    
    CSV3 --> TXT[TXT ë³´ê³ ì„œ ìƒì„±]
    TXT --> TXT1[í—¤ë” ë¬¸ìì—´ ìƒì„±<br/>f-string í¬ë§·íŒ…]
    TXT1 --> TXT2[offline_reasons ì¶”ê°€<br/>ì¡°ê±´ë¶€]
    TXT2 --> TXT3[ë°ì´í„° ìˆ˜ì§‘ í˜„í™© ë£¨í”„]
    TXT3 --> TXT4[ë¶„ì„ ê²°ê³¼ í¬ë§·íŒ…]
    TXT4 --> TXT5[ìš´í•­ íŒì • í¬ë§·íŒ…]
    TXT5 --> TXT6[Resilience ë©”ëª¨<br/>ì¡°ê±´ë¶€]
    TXT6 --> TXT7[íŒŒì¼ ì €ì¥<br/>summary.txt]
    
    TXT7 --> HTML[HTML ë³´ê³ ì„œ ìƒì„±]
    HTML --> HTML1[DOCTYPE + CSS ìŠ¤íƒ€ì¼]
    HTML1 --> HTML2[í—¤ë” ì„¹ì…˜<br/>ë©”íƒ€ë°ì´í„° p íƒœê·¸]
    HTML2 --> HTML3[í…Œì´ë¸” ìƒì„±<br/>api_status ë£¨í”„]
    HTML3 --> HTML31[CSS í´ë˜ìŠ¤ ê²°ì •<br/>success/warning/error]
    HTML31 --> HTML4[ë¶„ì„ ê²°ê³¼ ul/li]
    HTML4 --> HTML5[ìš´í•­ íŒì • ul/li<br/>í´ë˜ìŠ¤ ì ìš©]
    HTML5 --> HTML6[Resilience ë©”ëª¨<br/>ì¡°ê±´ë¶€]
    HTML6 --> HTML7[íŒŒì¼ ì €ì¥<br/>summary.html]
    
    HTML7 --> RETURN[ë°˜í™˜ê°’ ìƒì„±]
    RETURN --> RET1[json_path]
    RETURN --> RET2[csv_path]
    RETURN --> RET3[txt_path]
    RETURN --> RET4[html_path]
    RETURN --> RET5[summary_json]
    
    RET5 --> END([ì¢…ë£Œ: íŒŒì¼ ê²½ë¡œ ë”•ì…”ë„ˆë¦¬])
    
    style JSON6 fill:#e3f2fd
    style CSV3 fill:#e8f5e9
    style TXT7 fill:#fff3e0
    style HTML7 fill:#fce4ec
    style END fill:#c5cae9
            </div>
        </div>

        <!-- ì½”ë“œ ì˜ˆì‹œ -->
        <h2>ğŸ’» í•µì‹¬ ì½”ë“œ ì˜ˆì‹œ</h2>
        
        <h3>1. JSON ë³´ê³ ì„œ ìƒì„±</h3>
        <div class="code-block">
<pre>summary_json = {
    "metadata": {
        "generated_at": datetime.now().isoformat(),
        "location": data["location"],
        "forecast_hours": data["forecast_hours"],
        "system_version": "v2.3",
        "execution_mode": execution_mode,
        "resilience_mode": bool(resilience_notes),
    },
    "api_status": data["api_status"],
    "analysis": analysis,
    "collection_stats": {
        "total_timeseries": len(data["timeseries"]),
        "total_data_points": analysis.get("total_data_points", 0),
        "data_collection_rate": collection_rate,
    },
    "resilience_notes": resilience_notes,
}

json_path = output_path / f"summary_{timestamp}.json"
with open(json_path, "w", encoding="utf-8") as f:
    json.dump(summary_json, f, ensure_ascii=False, indent=2)</pre>
        </div>

        <h3>2. HTML í…Œì´ë¸” ìƒì„± (ë™ì )</h3>
        <div class="code-block">
<pre>for api_name, status in data["api_status"].items():
    conf = status.get("confidence", 0)
    conf_txt = f"{conf:.2f}"
    
    # CSS í´ë˜ìŠ¤ ë™ì  ê²°ì •
    status_class = (
        "success" if "âœ…" in status['status'] 
        else "warning" if "âš ï¸" in status['status'] 
        else "error"
    )
    
    html_content += f"""
        &lt;tr class='{status_class}'&gt;
            &lt;td&gt;{api_name}&lt;/td&gt;
            &lt;td&gt;{status['status']}&lt;/td&gt;
            &lt;td&gt;{conf_txt}&lt;/td&gt;
        &lt;/tr&gt;
    """</pre>
        </div>

        <h3>3. í†µê³„ ê³„ì‚° (í‰ê· ê°’)</h3>
        <div class="code-block">
<pre>avg_eri = sum(p.eri_value for p in all_eri_points) / len(all_eri_points)
avg_wind = sum(p.wind_speed_ms for p in all_eri_points) / len(all_eri_points)
avg_wave = sum(p.wave_height_m for p in all_eri_points) / len(all_eri_points)

# ì‹¤ì¸¡ê°’ (ì˜¨ë¼ì¸ ëª¨ë“œ, 121ê°œ í¬ì¸íŠ¸):
# avg_eri: 0.249
# avg_wind: 9.2 m/s
# avg_wave: 0.57 m</pre>
        </div>

        <!-- ì„±ëŠ¥ ì§€í‘œ -->
        <h2>âš¡ ì„±ëŠ¥ ì§€í‘œ (v2.3 ì‹¤ì¸¡ê°’)</h2>
        
        <table>
            <thead>
                <tr>
                    <th>í•­ëª©</th>
                    <th>ì˜¨ë¼ì¸ ëª¨ë“œ</th>
                    <th>ì˜¤í”„ë¼ì¸ ëª¨ë“œ</th>
                    <th>ë¹„ê³ </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>ì´ ë°ì´í„° í¬ì¸íŠ¸</strong></td>
                    <td><span class="highlight">121ê°œ</span></td>
                    <td>24ê°œ</td>
                    <td>5ë°° ì°¨ì´</td>
                </tr>
                <tr>
                    <td><strong>ë°ì´í„° ìˆ˜ì§‘ ì‹œê°„</strong></td>
                    <td>&lt;30ì´ˆ</td>
                    <td>&lt;3ì´ˆ</td>
                    <td>API í˜¸ì¶œ vs í•©ì„±</td>
                </tr>
                <tr>
                    <td><strong>ERI ê³„ì‚° ì‹œê°„</strong></td>
                    <td>0.05ì´ˆ</td>
                    <td>0.01ì´ˆ</td>
                    <td>121 vs 24 í¬ì¸íŠ¸</td>
                </tr>
                <tr>
                    <td><strong>ë³´ê³ ì„œ ìƒì„± ì‹œê°„</strong></td>
                    <td>0.5ì´ˆ</td>
                    <td>0.1ì´ˆ</td>
                    <td>4ê°€ì§€ í˜•ì‹</td>
                </tr>
                <tr style="background: #e8f5e9;">
                    <td><strong>ì „ì²´ ì²˜ë¦¬ ì‹œê°„</strong></td>
                    <td><span class="highlight">&lt;35ì´ˆ</span></td>
                    <td>&lt;5ì´ˆ</td>
                    <td>ìˆ˜ì§‘ë¶€í„° ë³´ê³ ì„œê¹Œì§€</td>
                </tr>
                <tr>
                    <td><strong>ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰</strong></td>
                    <td>~100 KB</td>
                    <td>~30 KB</td>
                    <td>ë°ì´í„° + ë³´ê³ ì„œ</td>
                </tr>
                <tr>
                    <td><strong>ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰</strong></td>
                    <td>~15 KB</td>
                    <td>~8 KB</td>
                    <td>4ê°€ì§€ ë³´ê³ ì„œ</td>
                </tr>
            </tbody>
        </table>

        <!-- ê²°ë¡  -->
        <div class="info-box" style="background: #e8f5e9; border-left-color: #4caf50;">
            <h3>ğŸ¯ í•µì‹¬ ìš”ì•½</h3>
            <ul style="margin-left: 20px; line-height: 1.8;">
                <li><strong>4ë‹¨ê³„ íŒŒì´í”„ë¼ì¸:</strong> ë°ì´í„° ìˆ˜ì§‘ â†’ ë¶„ì„ â†’ ë³´ê³ ì„œ ìƒì„± â†’ ì•Œë¦¼</li>
                <li><strong>4ê°€ì§€ ë³´ê³ ì„œ í˜•ì‹:</strong> JSON, CSV, TXT, HTML (ê° ìš©ë„ë³„ ìµœì í™”)</li>
                <li><strong>121ê°œ ë°ì´í„° í¬ì¸íŠ¸:</strong> ì˜¨ë¼ì¸ ëª¨ë“œì—ì„œ 4ê°œ ì†ŒìŠ¤ í†µí•©</li>
                <li><strong>ìë™ í´ë°±:</strong> API ì‹¤íŒ¨ ì‹œ Resilience ë©”ì»¤ë‹ˆì¦˜ ì‘ë™</li>
                <li><strong>ë¹ ë¥¸ ì²˜ë¦¬:</strong> ì „ì²´ íŒŒì´í”„ë¼ì¸ &lt;35ì´ˆ (ì˜¨ë¼ì¸), &lt;5ì´ˆ (ì˜¤í”„ë¼ì¸)</li>
                <li><strong>ë†’ì€ ì‹ ë¢°ë„:</strong> í‰ê·  65% (Stormglass 85%, Open-Meteo 75%, NCM 70%)</li>
                <li><strong>100% ê°€ìš©ì„±:</strong> ì˜¨ë¼ì¸/ì˜¤í”„ë¼ì¸ ìë™ ì „í™˜</li>
            </ul>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            },
            sequence: {
                diagramMarginX: 50,
                diagramMarginY: 10,
                actorMargin: 50,
                width: 150,
                height: 65,
                boxMargin: 10
            }
        });
    </script>
</body>
</html>


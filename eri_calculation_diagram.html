<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ERI ê³„ì‚° ì•Œê³ ë¦¬ì¦˜ ë‹¤ì´ì–´ê·¸ë¨</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid #e74c3c;
            padding-bottom: 15px;
        }
        .mermaid {
            text-align: center;
            margin: 20px 0;
        }
        .formula-box {
            background-color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }
        .threshold-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .threshold-table th,
        .threshold-table td {
            border: 1px solid #bdc3c7;
            padding: 10px;
            text-align: center;
        }
        .threshold-table th {
            background-color: #34495e;
            color: white;
        }
        .threshold-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>âš ï¸ ERI (Environmental Risk Index) ê³„ì‚° ì•Œê³ ë¦¬ì¦˜ v2.2</h1>
        
        <div style="background: #fff3e0; padding: 15px; margin-bottom: 20px; border-radius: 8px; border-left: 5px solid #ff9800;">
            <strong>â­ v2.2 ì—…ë°ì´íŠ¸</strong>: DEFAULT_ERI_RULES ìƒìˆ˜ ì¶”ê°€ + íŒŒì¼ ê¸°ë°˜ ê·œì¹™ ë³‘í•© ì§€ì›
        </div>
        
        <div class="mermaid">
            graph TD
                A[í•´ì–‘ ë°ì´í„° ì…ë ¥] --> RULES{ERI ê·œì¹™ ë¡œë“œ}
                RULES --> DEFAULT[DEFAULT_ERI_RULES]
                RULES --> FILE{eri_rules.yaml ì¡´ì¬?}
                FILE -->|Yes| MERGE[ê·œì¹™ ë³‘í•©]
                FILE -->|No| DEFAULT
                MERGE --> DEFAULT
                DEFAULT --> B{ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬}
                B -->|ìœ íš¨| C[ê°œë³„ ìœ„í—˜ë„ ê³„ì‚°]
                B -->|ë¬´íš¨| D[ê¸°ë³¸ê°’ í• ë‹¹]
                D --> C
                
                C --> E[í’ì† ìœ„í—˜ë„ ê³„ì‚°<br/>30% ê°€ì¤‘ì¹˜]
                C --> F[íŒŒê³  ìœ„í—˜ë„ ê³„ì‚°<br/>25% ê°€ì¤‘ì¹˜]
                C --> G[ìŠ¤ì›° ìœ„í—˜ë„ ê³„ì‚°<br/>15% ê°€ì¤‘ì¹˜]
                C --> H[ë°”ëŒíŒŒ ìœ„í—˜ë„ ê³„ì‚°<br/>10% ê°€ì¤‘ì¹˜]
                C --> I[í•´ë¥˜ ìœ„í—˜ë„ ê³„ì‚°<br/>5% ê°€ì¤‘ì¹˜]
                C --> J[ì‹œì • ìœ„í—˜ë„ ê³„ì‚°<br/>10% ê°€ì¤‘ì¹˜]
                C --> K[ì•ˆê°œ ìœ„í—˜ë„ ê³„ì‚°<br/>5% ê°€ì¤‘ì¹˜]
                
                E --> L{í’ì† ì„ê³„ê°’ í™•ì¸}
                L -->|0-10 m/s| M[ìœ„í—˜ë„: 0.2]
                L -->|10-15 m/s| N[ìœ„í—˜ë„: 0.4]
                L -->|15-20 m/s| O[ìœ„í—˜ë„: 0.7]
                L -->|20-25 m/s| P[ìœ„í—˜ë„: 1.0]
                L -->|25+ m/s| Q[ìœ„í—˜ë„: 1.0]
                
                F --> R{íŒŒê³  ì„ê³„ê°’ í™•ì¸}
                R -->|0-1.0 m| S[ìœ„í—˜ë„: 0.2]
                R -->|1.0-1.5 m| T[ìœ„í—˜ë„: 0.4]
                R -->|1.5-2.0 m| U[ìœ„í—˜ë„: 0.7]
                R -->|2.0-2.5 m| V[ìœ„í—˜ë„: 1.0]
                R -->|2.5+ m| W[ìœ„í—˜ë„: 1.0]
                
                G --> X{ìŠ¤ì›° ì„ê³„ê°’ í™•ì¸}
                X -->|0-0.5 m| Y[ìœ„í—˜ë„: 0.1]
                X -->|0.5-1.0 m| Z[ìœ„í—˜ë„: 0.3]
                X -->|1.0-1.5 m| AA[ìœ„í—˜ë„: 0.6]
                X -->|1.5-2.0 m| BB[ìœ„í—˜ë„: 1.0]
                X -->|2.0+ m| CC[ìœ„í—˜ë„: 1.0]
                
                H --> DD{ë°”ëŒíŒŒ ì„ê³„ê°’ í™•ì¸}
                I --> EE{í•´ë¥˜ ì„ê³„ê°’ í™•ì¸}
                J --> FF{ì‹œì • ì„ê³„ê°’ í™•ì¸}
                K --> GG{ì•ˆê°œ ì„ê³„ê°’ í™•ì¸}
                
                M --> HH[ê°€ì¤‘ í‰ê·  ERI ê³„ì‚°]
                N --> HH
                O --> HH
                P --> HH
                Q --> HH
                S --> HH
                T --> HH
                U --> HH
                V --> HH
                W --> HH
                Y --> HH
                Z --> HH
                AA --> HH
                BB --> HH
                CC --> HH
                
                HH --> II[ERI ê²°ê³¼ ì¶œë ¥]
                II --> JJ{ERI ë¶„ë¥˜}
                JJ -->|0.0-0.3| KK[ë‚®ì€ ìœ„í—˜]
                JJ -->|0.3-0.6| LL[ë³´í†µ ìœ„í—˜]
                JJ -->|0.6-0.8| MM[ë†’ì€ ìœ„í—˜]
                JJ -->|0.8-1.0| NN[ê·¹í•œ ìœ„í—˜]
                
                %% ìŠ¤íƒ€ì¼ë§
                classDef input fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
                classDef process fill:#e74c3c,stroke:#c0392b,stroke-width:2px,color:#fff
                classDef decision fill:#f39c12,stroke:#e67e22,stroke-width:2px,color:#fff
                classDef output fill:#27ae60,stroke:#229954,stroke-width:2px,color:#fff
                classDef lowRisk fill:#2ecc71,stroke:#27ae60,stroke-width:2px,color:#fff
                classDef medRisk fill:#f1c40f,stroke:#f39c12,stroke-width:2px,color:#000
                classDef highRisk fill:#e67e22,stroke:#d35400,stroke-width:2px,color:#fff
                classDef extremeRisk fill:#e74c3c,stroke:#c0392b,stroke-width:2px,color:#fff
                
                class A input
                class B,C,D,E,F,G,H,I,J,K,HH process
                class L,R,X,DD,EE,FF,GG,JJ decision
                class II output
                class KK lowRisk
                class LL medRisk
                class MM highRisk
                class NN extremeRisk
        </div>
        
        <div class="formula-box">
            <h3>ğŸ§® ERI ê³„ì‚° ê³µì‹</h3>
            <p><strong>ERI = (í’ì† ìœ„í—˜ë„ Ã— 0.30) + (íŒŒê³  ìœ„í—˜ë„ Ã— 0.25) + (ìŠ¤ì›° ìœ„í—˜ë„ Ã— 0.15) + (ë°”ëŒíŒŒ ìœ„í—˜ë„ Ã— 0.10) + (í•´ë¥˜ ìœ„í—˜ë„ Ã— 0.05) + (ì‹œì • ìœ„í—˜ë„ Ã— 0.10) + (ì•ˆê°œ ìœ„í—˜ë„ Ã— 0.05)</strong></p>
        </div>
        
        <table class="threshold-table">
            <thead>
                <tr>
                    <th>êµ¬ì„± ìš”ì†Œ</th>
                    <th>ê°€ì¤‘ì¹˜</th>
                    <th>ì„ê³„ê°’ 1</th>
                    <th>ì„ê³„ê°’ 2</th>
                    <th>ì„ê³„ê°’ 3</th>
                    <th>ì„ê³„ê°’ 4</th>
                    <th>ìœ„í—˜ë„ ë²”ìœ„</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>í’ì†</strong></td>
                    <td>30%</td>
                    <td>10 m/s</td>
                    <td>15 m/s</td>
                    <td>20 m/s</td>
                    <td>25 m/s</td>
                    <td>0.2 - 1.0</td>
                </tr>
                <tr>
                    <td><strong>íŒŒê³ </strong></td>
                    <td>25%</td>
                    <td>1.0 m</td>
                    <td>1.5 m</td>
                    <td>2.0 m</td>
                    <td>2.5 m</td>
                    <td>0.2 - 1.0</td>
                </tr>
                <tr>
                    <td><strong>ìŠ¤ì›°</strong></td>
                    <td>15%</td>
                    <td>0.5 m</td>
                    <td>1.0 m</td>
                    <td>1.5 m</td>
                    <td>2.0 m</td>
                    <td>0.1 - 1.0</td>
                </tr>
                <tr>
                    <td><strong>ë°”ëŒíŒŒ</strong></td>
                    <td>10%</td>
                    <td>0.5 m</td>
                    <td>1.0 m</td>
                    <td>1.5 m</td>
                    <td>2.0 m</td>
                    <td>0.1 - 1.0</td>
                </tr>
                <tr>
                    <td><strong>í•´ë¥˜</strong></td>
                    <td>5%</td>
                    <td>0.5 m/s</td>
                    <td>1.0 m/s</td>
                    <td>1.5 m/s</td>
                    <td>2.0 m/s</td>
                    <td>0.1 - 1.0</td>
                </tr>
                <tr>
                    <td><strong>ì‹œì •</strong></td>
                    <td>10%</td>
                    <td>10 km</td>
                    <td>5 km</td>
                    <td>2 km</td>
                    <td>1 km</td>
                    <td>0.1 - 1.0</td>
                </tr>
                <tr>
                    <td><strong>ì•ˆê°œ</strong></td>
                    <td>5%</td>
                    <td>0.1</td>
                    <td>0.3</td>
                    <td>0.5</td>
                    <td>0.7</td>
                    <td>0.2 - 1.0</td>
                </tr>
            </tbody>
        </table>
        
        <div class="formula-box">
            <h3>ğŸ“Š ERI ë¶„ë¥˜ ê¸°ì¤€</h3>
            <ul>
                <li><strong>ë‚®ì€ ìœ„í—˜ (0.0 - 0.3)</strong>: ì•ˆì „í•œ ìš´í•­ ì¡°ê±´</li>
                <li><strong>ë³´í†µ ìœ„í—˜ (0.3 - 0.6)</strong>: ì£¼ì˜ ê¹Šì€ ìš´í•­ í•„ìš”</li>
                <li><strong>ë†’ì€ ìœ„í—˜ (0.6 - 0.8)</strong>: ì¡°ê±´ë¶€ ìš´í•­ ê¶Œì¥</li>
                <li><strong>ê·¹í•œ ìœ„í—˜ (0.8 - 1.0)</strong>: ìš´í•­ ê¸ˆì§€ ê¶Œì¥</li>
            </ul>
        </div>
        
        <div style="background: #e8f5e9; padding: 20px; margin-top: 20px; border-radius: 8px; border-left: 5px solid #4caf50;">
            <h3>â­ v2.2 ì—…ë°ì´íŠ¸ ë‚´ìš© (2025-10-07)</h3>
            <h4>ERI ê·œì¹™ ì‹œìŠ¤í…œ ê°œì„ </h4>
            <ul>
                <li><strong>DEFAULT_ERI_RULES</strong>: í•˜ë“œì½”ë”©ëœ ê¸°ë³¸ ê·œì¹™ ìƒìˆ˜ ì¶”ê°€</li>
                <li><strong>ê·œì¹™ ë³‘í•© ë¡œì§</strong>: eri_rules.yaml íŒŒì¼ë¡œ ê¸°ë³¸ê°’ ì˜¤ë²„ë¼ì´ë“œ ê°€ëŠ¥</li>
                <li><strong>ì•ˆì „í•œ ë³‘í•©</strong>: deepcopyë¥¼ ì‚¬ìš©í•œ ê·œì¹™ ë³‘í•©ìœ¼ë¡œ ë¶€ì‘ìš© ë°©ì§€</li>
                <li><strong>ìœ ì—°ì„±</strong>: íŒŒì¼ ëˆ„ë½ ì‹œ ê¸°ë³¸ ê·œì¹™ìœ¼ë¡œ ìë™ ë³µêµ¬</li>
            </ul>
            
            <h4>ì½”ë“œ ì˜ˆì‹œ</h4>
            <pre style="background: #263238; color: #aed581; padding: 15px; border-radius: 5px; overflow-x: auto;">
DEFAULT_ERI_RULES = {
    "wind": {"thresholds": [10, 15, 20, 25], "weights": [0.2, 0.4, 0.7, 1.0]},
    "wave": {"thresholds": [1.0, 1.5, 2.0, 2.5], "weights": [0.2, 0.4, 0.7, 1.0]},
    # ... 7ê°œ í•´ì–‘ ë³€ìˆ˜
}

def _merge_rules(base, overrides):
    # eri_rules.yamlì˜ ê°’ìœ¼ë¡œ ê¸°ë³¸ê°’ ì˜¤ë²„ë¼ì´ë“œ
    return merged_rules
            </pre>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });
    </script>
</body>
</html>

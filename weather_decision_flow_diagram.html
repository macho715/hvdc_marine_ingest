<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•´ì–‘ ë‚ ì”¨ íŒì • ë¡œì§ í”Œë¡œìš°</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid #3498db;
            padding-bottom: 15px;
        }
        .mermaid {
            text-align: center;
            margin: 20px 0;
        }
        .legend {
            margin-top: 30px;
            padding: 20px;
            background-color: #ecf0f1;
            border-radius: 8px;
        }
        .legend h3 {
            color: #2c3e50;
            margin-top: 0;
        }
        .legend-item {
            display: inline-block;
            margin: 10px 15px;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 14px;
        }
        .data-source { background-color: #3498db; color: white; }
        .processing { background-color: #e74c3c; color: white; }
        .decision { background-color: #27ae60; color: white; }
        .output { background-color: #f39c12; color: white; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒŠ í•´ì–‘ ë‚ ì”¨ íŒì • ë¡œì§ í”Œë¡œìš°</h1>
        
        <div class="mermaid">
            flowchart TD
                %% ë°ì´í„° ìˆ˜ì§‘ ë‹¨ê³„
                A[ë°ì´í„° ìˆ˜ì§‘ ì‹œì‘] --> B[Stormglass API]
                A --> C[Open-Meteo API]
                A --> D[NCM Selenium]
                A --> E[WorldTides API]
                
                %% ë°ì´í„° ì „ì²˜ë¦¬
                B --> F[SI ë‹¨ìœ„ ì •ê·œí™”]
                C --> F
                D --> F
                E --> F
                
                %% ë°ì´í„° í’ˆì§ˆ ê²€ì¦
                F --> G{ë°ì´í„° í’ˆì§ˆ ê²€ì¦}
                G -->|ì‹ ë¢°ë„ â‰¥ 0.5| H[ë°ì´í„° ìŠ¹ì¸]
                G -->|ì‹ ë¢°ë„ < 0.5| I[í´ë°± ë°ì´í„° ìƒì„±]
                I --> H
                
                %% ë‹¤ì¤‘ ì†ŒìŠ¤ ìœµí•©
                H --> J[ì‹œê°„ë³„ ê·¸ë£¹í™”]
                J --> K[ê°€ì¤‘ì¹˜ ê³„ì‚°]
                K --> L[ê°€ì¤‘ í‰ê·  ìœµí•©]
                
                %% ERI ê³„ì‚°
                L --> M[ERI ê³„ì‚° ì‹œì‘]
                M --> N[í’ì† ìœ„í—˜ë„ ê³„ì‚°]
                M --> O[íŒŒê³  ìœ„í—˜ë„ ê³„ì‚°]
                M --> P[ì‹œì • ìœ„í—˜ë„ ê³„ì‚°]
                M --> Q[ì•ˆê°œ ìœ„í—˜ë„ ê³„ì‚°]
                M --> R[ìŠ¤ì›°/ë°”ëŒíŒŒ/í•´ë¥˜ ê³„ì‚°]
                
                N --> S[ê°€ì¤‘ í‰ê·  ERI]
                O --> S
                P --> S
                Q --> S
                R --> S
                
                %% ìš´í•­ íŒì •
                S --> T{GO ê²Œì´íŠ¸ í™•ì¸}
                T -->|í’ì† â‰¤ 10.29m/s<br/>íŒŒê³  â‰¤ 1.0m| U[GO íŒì •]
                T -->|ì¡°ê±´ ë¶ˆë§Œì¡±| V{CONDITIONAL ê²Œì´íŠ¸ í™•ì¸}
                V -->|í’ì† â‰¤ 11.32m/s<br/>íŒŒê³  â‰¤ 1.2m| W[CONDITIONAL íŒì •]
                V -->|ì¡°ê±´ ë¶ˆë§Œì¡±| X[NO-GO íŒì •]
                
                %% ETA ì˜í–¥ í‰ê°€
                U --> Y[ETA ì˜í–¥ í‰ê°€]
                W --> Y
                X --> Y
                
                %% Gamma ì•Œë¦¼
                Y --> Z{ERI ê¸°ë°˜ Gamma ê³„ì‚°}
                Z -->|ERI > 0.7| AA[High Seas Alert]
                Z -->|ERI > 0.5| BB[Rough at Times Alert]
                Z -->|ERI â‰¤ 0.5| CC[Normal Conditions]
                
                %% ìµœì¢… ì¶œë ¥
                AA --> DD[ìµœì¢… ìš´í•­ íŒì •]
                BB --> DD
                CC --> DD
                
                %% ê²°ê³¼ ì €ì¥
                DD --> EE[JSON ë³´ê³ ì„œ ìƒì„±]
                DD --> FF[CSV ìš”ì•½ ìƒì„±]
                DD --> GG[ë²¡í„° DB ì €ì¥]
                
                %% ìŠ¤íƒ€ì¼ë§
                classDef dataSource fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
                classDef processing fill:#e74c3c,stroke:#c0392b,stroke-width:2px,color:#fff
                classDef decision fill:#27ae60,stroke:#229954,stroke-width:2px,color:#fff
                classDef output fill:#f39c12,stroke:#e67e22,stroke-width:2px,color:#fff
                
                class B,C,D,E dataSource
                class F,G,H,I,J,K,L,M,N,O,P,Q,R,S processing
                class T,U,V,W,X,Y,Z,AA,BB,CC,DD decision
                class EE,FF,GG output
        </div>
        
        <div class="legend">
            <h3>ğŸ¨ ë²”ë¡€</h3>
            <div class="legend-item data-source">ë°ì´í„° ì†ŒìŠ¤</div>
            <div class="legend-item processing">ë°ì´í„° ì²˜ë¦¬</div>
            <div class="legend-item decision">íŒì • ë¡œì§</div>
            <div class="legend-item output">ê²°ê³¼ ì¶œë ¥</div>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });
    </script>
</body>
</html>
